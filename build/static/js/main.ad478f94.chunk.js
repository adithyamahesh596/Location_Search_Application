(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{301:function(e,t,a){e.exports=a(611)},611:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(47),o=a.n(r),c=a(626),i=(a(306),a(75)),s=a(81),u=a(267),m=a(29),h=a(30),d=a(32),p=a(31),v=a(33),g=a(625),f=a(621),b="USER_LOGGED_IN",E="USER_LOGGED_OUT",O=a(268),w=a.n(O),j={login:function(e){return w.a.post("/api/auth",{credentials:e}).then(function(e){return e.data.user})}},S=function(e){return{type:b,user:e}};var y=Object(s.b)(function(e){return{isAuthenticated:!!e.user.token}},{logout:function(){return function(e){localStorage.removeItem("bookwormJWT"),e({type:E})}}})(function(e){e.isAuthenticated,e.logout;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("h1",null,"HomePage"),l.a.createElement("h1",null,l.a.createElement(f.a,{to:"/new"},"About"),l.a.createElement("br",null)),l.a.createElement("h1",null,l.a.createElement(f.a,{to:"/search"},"Click here to go to Location Search Application"))))}),k=a(76),C=a(269),L=a(622),N=a(623),A=a(624),F=a(270),x=a.n(F),T=function(e){var t=e.text;return l.a.createElement("span",{style:{color:"#ae5856"}},t)},U=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={data:{email:"",password:""},loading:!1,errors:{}},a.onSubmit=function(){var e=a.validate(a.state.data);a.setState({errors:e}),0===Object.keys(e).length&&(a.setState({loading:!0}),a.props.submit(a.state.data).catch(function(e){return a.setState({errors:e.response.data.errors,loading:!1})}))},a.validate=function(e){var t={};return x.a.isEmail(e.email)||(t.email="Invalid email"),e.password||(t.password="Invalid password"),t},a.onChange=function(e){return a.setState({data:Object(C.a)({},a.state.data,Object(k.a)({},e.target.name,e.target.value))})},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.data,a=e.errors,n=e.loading;return l.a.createElement(L.a,{onSubmit:this.onSubmit,loading:n},a.global&&l.a.createElement(N.a,{negative:!0},l.a.createElement(N.a.Header,null,"Something went wrong"),l.a.createElement("p",null,a.global)),l.a.createElement(L.a.Field,{error:!!a.email},l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"example@example.com",value:t.email,onChange:this.onChange}),a.email&&l.a.createElement(T,{text:a.email})),l.a.createElement(L.a.Field,{error:!!a.password},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Enter password",value:t.password,onChange:this.onChange}),a.password&&l.a.createElement(T,{text:a.password})),l.a.createElement(A.a,{primary:!0},"Login"))}}]),t}(n.Component),G=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).submit=function(e){return a.props.login(e).then(function(){return a.props.history.push("/")})},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"LoginPage"),l.a.createElement(U,{submit:this.submit}))}}]),t}(n.Component),J=Object(s.b)(null,{login:function(e){return function(t){return j.login(e).then(function(e){localStorage.bookwormJWT=e.token,t(S(e))})}}})(G),D=(a(224),a(115)),P=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).manipState=function(e,t,a){return Object.assign({},e,Object(k.a)({},t,a))},e.handleChange=function(t){var a=e.manipState(e.state,t,!e.state[t]);e.setState(a)},e.handleSelect=function(t){var a=e.manipState(e.state,"selected",t);e.setState(a)},e.state={selected:{}},e.options=[{label:"Top Picks",value:"toppicks"},{label:"Trending",value:"trending"},{label:"Food",value:"food"},{label:"Coffee",value:"coffee"},{label:"Nightlife",value:"nightlife"},{label:"Fun",value:"fun"},{label:"Shopping",value:"shopping"}],e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"demo-inner"},l.a.createElement("h1",null,"react-select-input Demo"),l.a.createElement(D.a,{onSelect:this.handleSelect,onChange:this.handleChange,options:this.options,autoFocus:!1,openUp:!1,disableEnter:!0,collapseOnBlur:!0,collapseOnEscape:!0,collapseOnSelect:!0}))}}]),t}(n.Component),W=a(163),I=a.n(W),M=a(257),R=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={map:null,markers:[]},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"mapMoved",value:function(){console.log("map moved:"+JSON.stringify(this.state.map.getCenter()))}},{key:"mapLoaded",value:function(e){null===this.state.map&&this.setState({map:e})}},{key:"zoomChanged",value:function(){console.log("zoom changed:"+this.state.map.getZoom())}},{key:"render",value:function(){console.log(this.props);var e=this.props.markers.map(function(e,t){var a={position:{lat:e.location.lat,lng:e.location.lng}};return l.a.createElement(M.Marker,Object.assign({key:t},a))});return l.a.createElement("div",null,l.a.createElement(M.GoogleMap,{ref:this.mapLoaded.bind(this),onDragEnd:this.mapMoved.bind(this),onZoomChanged:this.zoomChanged.bind(this),defaultZoom:this.props.zoom,center:this.props.center},e))}}]),t}(n.Component),K=Object(M.withGoogleMap)(R),V=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).manipState=function(e,t,a){return Object.assign({},e,Object(k.a)({},t,a))},a.handleChange=function(e){var t=a.manipState(a.state,e,!a.state[e]);a.setState(t)},a.handleSelect=function(e){var t=a.manipState(a.state,"selected",e);a.setState(t)},a.state={venues:[],search:{location:"",query:"",radius:""},centerLat:37.401018799999996,centerLng:-122.0178674,selected:{}},a.options=[{label:"Top Picks",value:"toppicks"},{label:"Trending",value:"trending"},{label:"Food",value:"food"},{label:"Coffee",value:"coffee"},{label:"Nightlife",value:"nightlife"},{label:"Fun",value:"fun"},{label:"Shopping",value:"shopping"}],a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"updateSearchFilters",value:function(e,t){var a=Object.assign({},this.state.search);a[e]=t.target.value,this.setState({search:a})}},{key:"searchVenues",value:function(e){var t=this;e.preventDefault(),console.log("searchVenues: "+JSON.stringify(this.state.search));var a={v:"20190101",near:this.state.search.location,query:this.state.selected.value,limit:50,radius:this.state.search.radius,client_id:"FDTNNCZ2XM53JG0PDPHBJRRGEJU5TCKHAUT1KGEAXKGURAPE",client_secret:"ANZQ2VPFYNUNAXKQQ3G000KMDKIAW2VZIMOKVYUOG41QEKLT"};I.a.get("https://api.foursquare.com/v2/venues/search").query(a).set("Accept","application/json").end(function(e,a){if(e)alert("PLEASE FILL OUT ALL THE FIELDS");else{var n=a.body.response.venues;t.setState({venues:n},function(){console.log(t.state.venues),t.state.venues.length>0&&t.setState({centerLat:t.state.venues[0].location.lat,centerLng:t.state.venues[0].location.lng}),t.forceUpdate()})}})}},{key:"render",value:function(){var e={lat:this.state.centerLat,lng:this.state.centerLng};return l.a.createElement("form",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6 col-sm-6 col-md-8 col-lg-9 col-xl-9 clear-padding"},l.a.createElement(K,{center:e,zoom:12,containerElement:l.a.createElement("div",{style:{height:"100vh"}}),mapElement:l.a.createElement("div",{style:{height:"100vh"}}),markers:this.state.venues})),l.a.createElement("div",{className:"col-6 col-sm-6 col-md-4 col-lg-3 col-xl-3 clear-padding"},l.a.createElement("div",{className:"form-style-8",style:{height:"100vh"}},l.a.createElement("div",{className:"box"},l.a.createElement("h1",null,"Search Venues"),l.a.createElement(D.a,{onSelect:this.handleSelect,onChange:this.handleChange,options:this.options,autoFocus:!1,openUp:!1,disableEnter:!0,collapseOnBlur:!0,collapseOnEscape:!0,collapseOnSelect:!0}),l.a.createElement("input",{onChange:this.updateSearchFilters.bind(this,"location"),type:"number",placeholder:"Zipcode",className:"inputRequired"}),l.a.createElement("input",{onChange:this.updateSearchFilters.bind(this,"radius"),type:"number",placeholder:"Radius in metres"})),l.a.createElement("p",null,l.a.createElement("button",{className:"w3-button w3-border w3-hover-cyan w3-xlarge",onClick:this.searchVenues.bind(this)},"Search")),l.a.createElement("h1",null,"Venues"),l.a.createElement("ul",null,this.state.venues.map(function(e,t){return l.a.createElement("li",{key:e.id},l.a.createElement("div",{id:"venue"},l.a.createElement("div",{id:"venue-text"},l.a.createElement("span",{id:"name"},e.name),l.a.createElement("br",null),e.categories.length>0?l.a.createElement("b",null,e.categories[0].name,l.a.createElement("br",null)):null,l.a.createElement("span",null,e.location.formattedAddress[0]),l.a.createElement("br",null),l.a.createElement("span",null,e.location.formattedAddress[1]),l.a.createElement("br",null),l.a.createElement("span",null,e.location.formattedAddress[2]),l.a.createElement("br",null),e.url?l.a.createElement("a",{href:e.url},e.url,l.a.createElement("br",null)):null)))}))))))}}]),t}(n.Component),Z=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(g.a,{path:"/",exact:!0,component:V}),l.a.createElement(g.a,{path:"/login",exact:!0,component:J}),l.a.createElement(g.a,{path:"/new",exact:!0,component:P}),l.a.createElement(g.a,{path:"/search",exact:!0,component:y}))}}]),t}(n.Component),_=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function q(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var z=Object(i.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case b:return t.user;case E:return{};default:return e}}}),B=a(290),H=Object(i.createStore)(z,Object(B.composeWithDevTools)(Object(i.applyMiddleware)(u.a)));if(localStorage.bookwormJWT){var Q={token:localStorage.bookwormJWT};H.dispatch(S(Q))}o.a.render(l.a.createElement(c.a,null,l.a.createElement(s.a,{store:H},l.a.createElement(Z,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");_?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):q(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):q(e)})}}()}},[[301,2,1]]]);
//# sourceMappingURL=main.ad478f94.chunk.js.map